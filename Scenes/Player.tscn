[gd_scene load_steps=14 format=3 uid="uid://g4h3dgkdttgi"]

[ext_resource type="Script" uid="uid://b6iwdm4m5v114" path="res://Scripts/PlayerScripts/Player.gd" id="1_bcffs"]
[ext_resource type="Script" uid="uid://ctc7pkgu58i8t" path="res://Scripts/state_machine.gd" id="1_fn5od"]
[ext_resource type="Script" uid="uid://7ov8nuf2mduw" path="res://Scripts/PlayerScripts/idle.gd" id="1_hr86y"]
[ext_resource type="Script" uid="uid://oklsav2b2r0y" path="res://Scripts/PlayerScripts/move.gd" id="3_gfjpw"]
[ext_resource type="Curve" uid="uid://b3wu0djn28s0i" path="res://Assets/speedCurve.tres" id="6_bhhdu"]
[ext_resource type="Script" uid="uid://p8wvf6gobov6" path="res://Scripts/PlayerScripts/attack.gd" id="6_nn08x"]
[ext_resource type="Script" uid="uid://l2j4vt6d6lsj" path="res://Scripts/bump.gd" id="7_52ee3"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_vrkc0"]

[sub_resource type="CapsuleMesh" id="CapsuleMesh_hr86y"]

[sub_resource type="Animation" id="Animation_52ee3"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Area3D:monitoring")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_nn08x"]
resource_name = "attack_spin"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Area3D:monitoring")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.15, 0.53333336, 1),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [false, true, false, false]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_bhhdu"]
_data = {
&"RESET": SubResource("Animation_52ee3"),
&"attack_spin": SubResource("Animation_nn08x")
}

[sub_resource type="CylinderShape3D" id="CylinderShape3D_megsn"]
height = 1.0
radius = 1.3

[node name="Player" type="CharacterBody3D"]
collision_mask = 20
script = ExtResource("1_bcffs")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_vrkc0")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
mesh = SubResource("CapsuleMesh_hr86y")

[node name="RemoteTransform3D" type="RemoteTransform3D" parent="."]
remote_path = NodePath("../StateMachine/Attack/Area3D")

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("starting_state")]
script = ExtResource("1_fn5od")
starting_state = NodePath("Idle")

[node name="Idle" type="Node" parent="StateMachine" node_paths=PackedStringArray("moveState", "attackState")]
script = ExtResource("1_hr86y")
moveState = NodePath("../Move")
attackState = NodePath("../Attack")

[node name="Move" type="Node" parent="StateMachine" node_paths=PackedStringArray("idleState", "attackState", "bumpState")]
script = ExtResource("3_gfjpw")
idleState = NodePath("../Idle")
attackState = NodePath("../Attack")
bumpState = NodePath("../Bump")
SPEED_CURVE = ExtResource("6_bhhdu")

[node name="Attack" type="Node" parent="StateMachine" node_paths=PackedStringArray("idleState", "moveState")]
script = ExtResource("6_nn08x")
idleState = NodePath("../Idle")
moveState = NodePath("../Move")

[node name="AnimationPlayer" type="AnimationPlayer" parent="StateMachine/Attack"]
libraries = {
&"": SubResource("AnimationLibrary_bhhdu")
}

[node name="Area3D" type="Area3D" parent="StateMachine/Attack"]
collision_layer = 2
collision_mask = 4
monitoring = false
monitorable = false

[node name="CollisionShape3D" type="CollisionShape3D" parent="StateMachine/Attack/Area3D"]
shape = SubResource("CylinderShape3D_megsn")

[node name="Bump" type="Node" parent="StateMachine" node_paths=PackedStringArray("moveState")]
script = ExtResource("7_52ee3")
moveState = NodePath("../Move")
metadata/_custom_type_script = "uid://dtv5bqdhlrib4"

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]

[connection signal="body_entered" from="StateMachine/Attack/Area3D" to="StateMachine/Attack" method="_on_area_3d_body_entered"]
