[gd_scene format=3 uid="uid://g4h3dgkdttgi"]

[ext_resource type="Script" uid="uid://b6iwdm4m5v114" path="res://Scripts/player_scripts/player.gd" id="1_bcffs"]
[ext_resource type="Script" uid="uid://ctc7pkgu58i8t" path="res://Scripts/state_machine.gd" id="1_fn5od"]
[ext_resource type="Script" uid="uid://7ov8nuf2mduw" path="res://Scripts/player_scripts/idle.gd" id="1_hr86y"]
[ext_resource type="Script" uid="uid://oklsav2b2r0y" path="res://Scripts/player_scripts/move.gd" id="3_gfjpw"]
[ext_resource type="Script" uid="uid://p8wvf6gobov6" path="res://Scripts/player_scripts/attack.gd" id="6_nn08x"]
[ext_resource type="Script" uid="uid://dkk4nk34bq0vt" path="res://Scripts/player_scripts/jump.gd" id="7_3smsa"]
[ext_resource type="Script" uid="uid://l2j4vt6d6lsj" path="res://Scripts/player_scripts/bump.gd" id="7_52ee3"]
[ext_resource type="Script" uid="uid://erh62podniaq" path="res://Scripts/player_scripts/fall.gd" id="8_8erm5"]
[ext_resource type="Script" uid="uid://b3oow61osp0dw" path="res://Scripts/enemy_scripts/attack_spin_air.gd" id="9_f1ek2"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_x3wgy"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_8erm5"]
render_priority = 1
transparency = 1
shading_mode = 0
albedo_color = Color(0, 0, 0, 1)
grow = true
grow_amount = 0.01
distance_fade_mode = 3
stencil_mode = 3
stencil_flags = 1
stencil_compare = 5
metadata/_stencil_owned = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_f1ek2"]
next_pass = SubResource("StandardMaterial3D_8erm5")
diffuse_mode = 3
specular_mode = 1
metallic_specular = 0.45
roughness = 0.03
rim_enabled = true
rim = 0.1
stencil_mode = 1
stencil_flags = 2

[sub_resource type="CapsuleMesh" id="CapsuleMesh_tx1dd"]
material = SubResource("StandardMaterial3D_f1ek2")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_tx1dd"]
render_priority = 1
transparency = 1
shading_mode = 0
albedo_color = Color(0, 0, 0, 1)
grow = true
grow_amount = 0.01
stencil_mode = 3
stencil_flags = 1
stencil_compare = 5
metadata/_stencil_owned = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_gymyn"]
next_pass = SubResource("StandardMaterial3D_tx1dd")
diffuse_mode = 3
specular_mode = 1
albedo_color = Color(0.35760498, 0.84765625, 0.39971876, 1)
metallic_specular = 0.45
roughness = 0.03
rim_enabled = true
rim = 0.1
stencil_mode = 1
stencil_flags = 2

[sub_resource type="CylinderShape3D" id="CylinderShape3D_megsn"]
height = 1.0
radius = 1.3

[sub_resource type="Animation" id="Animation_52ee3"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../../AttackHitbox:monitoring")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("../../AttackHitbox/CollisionShape3D:debug_color")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(0, 0.6, 0.7, 0.42)]
}

[sub_resource type="Animation" id="Animation_x3wgy"]
resource_name = "attack_spin_end"
length = 0.33333668
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../../AttackHitbox:monitoring")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("../../AttackHitbox/CollisionShape3D:debug_color")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.2),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [Color(0.91764706, 0, 0.7019608, 0.41960785), Color(0, 0.6, 0.7, 0.42)]
}

[sub_resource type="Animation" id="Animation_3smsa"]
resource_name = "attack_spin_loop"
length = 0.05000167
loop_mode = 1
step = 0.016666668
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../../AttackHitbox:monitoring")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("../../AttackHitbox/CollisionShape3D:debug_color")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [Color(0.91764706, 0, 0.7019608, 0.41960785)]
}

[sub_resource type="Animation" id="Animation_nn08x"]
resource_name = "attack_spin"
length = 0.06666667
step = 0.016666668
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../../AttackHitbox:monitoring")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.05),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [false, true]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("../../AttackHitbox/CollisionShape3D:debug_color")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.05),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [Color(0, 0.6, 0.7, 0.42), Color(0.9186498, 6.728679e-05, 0.7032077, 0.41960785)]
}

[sub_resource type="Animation" id="Animation_f1ek2"]
resource_name = "test"

[sub_resource type="AnimationLibrary" id="AnimationLibrary_bhhdu"]
_data = {
&"RESET": SubResource("Animation_52ee3"),
&"attack_spin_end": SubResource("Animation_x3wgy"),
&"attack_spin_loop": SubResource("Animation_3smsa"),
&"attack_spin_start": SubResource("Animation_nn08x"),
&"test": SubResource("Animation_f1ek2")
}

[node name="Player" type="CharacterBody3D" unique_id=226750318]
collision_mask = 20
script = ExtResource("1_bcffs")

[node name="HurtBox" type="CollisionShape3D" parent="." unique_id=182845281]
shape = SubResource("CapsuleShape3D_x3wgy")

[node name="MeshInstance3D" type="MeshInstance3D" parent="." unique_id=1782217622]
mesh = SubResource("CapsuleMesh_tx1dd")
surface_material_override/0 = SubResource("StandardMaterial3D_gymyn")

[node name="AttackHitbox" type="Area3D" parent="." unique_id=395428937]
collision_layer = 2
collision_mask = 4
monitoring = false
monitorable = false

[node name="CollisionShape3D" type="CollisionShape3D" parent="AttackHitbox" unique_id=1379804482]
shape = SubResource("CylinderShape3D_megsn")

[node name="AnimationPlayer" type="AnimationPlayer" parent="." unique_id=1806807638]
root_node = NodePath("../StateMachine/AttackSpin")
libraries/ = SubResource("AnimationLibrary_bhhdu")

[node name="StateMachine" type="Node" parent="." unique_id=901472754 node_paths=PackedStringArray("starting_state")]
script = ExtResource("1_fn5od")
starting_state = NodePath("Idle")

[node name="Idle" type="Node" parent="StateMachine" unique_id=687274775]
script = ExtResource("1_hr86y")

[node name="Move" type="Node" parent="StateMachine" unique_id=1099296564]
script = ExtResource("3_gfjpw")

[node name="AttackSpin" type="Node" parent="StateMachine" unique_id=1285790690 node_paths=PackedStringArray("idleState", "moveState")]
script = ExtResource("6_nn08x")
idleState = NodePath("../Idle")
moveState = NodePath("../Move")

[node name="Bump" type="Node" parent="StateMachine" unique_id=2144017716 node_paths=PackedStringArray("moveState")]
script = ExtResource("7_52ee3")
moveState = NodePath("../Move")
metadata/_custom_type_script = "uid://dtv5bqdhlrib4"

[node name="Jump" type="Node" parent="StateMachine" unique_id=2091186511]
script = ExtResource("7_3smsa")
metadata/_custom_type_script = "uid://dtv5bqdhlrib4"

[node name="Fall" type="Node" parent="StateMachine" unique_id=953032795]
script = ExtResource("8_8erm5")
metadata/_custom_type_script = "uid://bsdkuk3qanvib"

[node name="AttackSpinAir" type="Node" parent="StateMachine" unique_id=1948955435]
script = ExtResource("9_f1ek2")
metadata/_custom_type_script = "uid://dtv5bqdhlrib4"

[connection signal="body_entered" from="AttackHitbox" to="StateMachine/AttackSpin" method="_on_attack_hitbox_body_entered"]
[connection signal="animation_finished" from="AnimationPlayer" to="StateMachine/AttackSpin" method="_on_animation_player_animation_finished"]
[connection signal="animation_finished" from="AnimationPlayer" to="StateMachine/AttackSpinAir" method="_on_animation_player_animation_finished"]
